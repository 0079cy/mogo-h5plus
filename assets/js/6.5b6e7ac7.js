(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{153:function(t,d,e){"use strict";e.r(d);var v=e(0),_=Object(v.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,d=t.$createElement,e=t._self._c||d;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"hotfix配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hotfix配置","aria-hidden":"true"}},[t._v("#")]),t._v(" Hotfix配置")]),e("p",[t._v("热更新能够不提交应用商店审核而修改 APP 内容,使得 app 的迭代变的非常灵活.")]),e("p",[e("code",[t._v("MogoH5+")]),t._v("在"),e("code",[t._v("1.3.0")]),t._v("后加入了"),e("code",[t._v("热更新/安装更新")]),t._v("的集成.同时,我们的"),e("code",[t._v("热更新服务器")]),t._v("也在内测中,将在不久公测使用.您无需后端就可以完成整个软件的"),e("code",[t._v("热更新/安装更新")]),t._v("服务.")]),e("h2",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" 介绍")]),e("p",[t._v("在使用热更新前,请看完这份介绍再使用.")]),e("h3",{attrs:{id:"热更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#热更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 热更新")]),e("p",[t._v("对于安卓来说,热更新是没有任何问题的,但是苹果您可以看下面这段话.")]),e("h4",{attrs:{id:"app-store-应用更新说明-引自-dcloud"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-store-应用更新说明-引自-dcloud","aria-hidden":"true"}},[t._v("#")]),t._v(" App store 应用更新说明(引自 dcloud)")]),e("blockquote",[e("p",[t._v("应用资源更新肯定是违反 apple 政策的，但目前看起来它也不管。你在官网案例那里下载 Appstore 版本的那些 app，大多启动后都会提示更新，反正也都没下架。如果你不是很大的公司，apple 不会理睬你。如果你是大公司，建议不要做整体更新，每次更新几个页面，也不要提示更新后需要重启，这样会安全点。")])]),e("p",[t._v("作者本人的实践中也经常使用热更新,名声不大,不频繁基本上可以自由使用.\n同样,我们加入了"),e("code",[t._v("静默更新")]),t._v("这种比较无脑的更新.")]),e("h3",{attrs:{id:"安装更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装更新")]),e("p",[t._v("安装更新在这里指的就是更新大版本,比如添加了模块,必须重新安装.")]),e("h4",{attrs:{id:"在安卓的安装更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在安卓的安装更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 在安卓的安装更新")]),e("ol",[e("li",[t._v("可以让 APP 提示,然后用户选择自己下载安装")]),e("li",[t._v("应用商店更新")])]),e("h4",{attrs:{id:"在苹果的安装更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在苹果的安装更新","aria-hidden":"true"}},[t._v("#")]),t._v(" 在苹果的安装更新")]),e("ol",[e("li",[t._v("必须提交 AppStore 提交审核")])]),e("p",[t._v("在这里顺便提一下,苹果用户的习惯一般是自己主动更新.\n在苹果应用商店的大厂 app (微信,淘宝,京东) 更新几乎不会受到 app 的更新推送,也没有所谓"),e("code",[t._v("检查更新")]),t._v("的功能,也就是说,更新是用户主动操作的.我们的"),e("code",[t._v("迭代")]),t._v("同样也遵循这条"),e("code",[t._v("行规")]),t._v(".")]),e("h2",{attrs:{id:"hotfix参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hotfix参数","aria-hidden":"true"}},[t._v("#")]),t._v(" Hotfix参数")]),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),e("th",[t._v("说明")]),e("th",[t._v("类型")])])]),e("tbody",[e("tr",[e("td",[e("code",[t._v("url")])]),e("td",[t._v("更新请求地址")]),e("td",[t._v("string")])]),e("tr",[e("td",[e("code",[t._v("before(data)")])]),e("td",[e("code",[t._v("data")]),t._v("返回的是请求后的"),e("code",[t._v("json")]),t._v("数据; 可在函数中执行安装前进行的操作,在此函数中,可以做一些确认操作,返回"),e("code",[t._v("Promise.resolve()")]),t._v("则执行下载安装,不返回或返回其他则不执行下载安装")]),e("td",[e("code",[t._v("Promise")])])]),e("tr",[e("td",[e("code",[t._v("success")])]),e("td",[t._v("安装完成后执行的动作,比如重启app")]),e("td",[e("code",[t._v("void")])])]),e("tr",[e("td",[e("code",[t._v("error(e)")])]),e("td",[t._v("返回error对象,一般在调试中使用")]),e("td",[e("code",[t._v("Error")])])]),e("tr",[e("td",[e("code",[t._v("onProgress(n)")])]),e("td",[t._v("下载进度,"),e("code",[t._v("n")]),t._v("为0-100的下载进度")]),e("td",[e("code",[t._v("int")])])])])]),e("h2",{attrs:{id:"后端接收的数据格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端接收的数据格式","aria-hidden":"true"}},[t._v("#")]),t._v(" 后端接收的数据格式")]),e("p",[e("code",[t._v("checkUpdate(url)")]),t._v(" 是以 "),e("code",[t._v("POST")]),t._v(" 去访问 URL 的.数据类型为"),e("code",[t._v("application/json")])]),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),e("th",[t._v("描述")]),e("th",[t._v("类型")])])]),e("tbody",[e("tr",[e("td",[t._v("version")]),e("td",[t._v("app 当前的版本 ,如 2.1.0")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("os")]),e("td",[t._v("app 设备的系统信息 比如系统版本")]),e("td",[t._v("json")])]),e("tr",[e("td",[t._v("device")]),e("td",[t._v("app 设备的设备信息 比如 uuid")]),e("td",[t._v("json")])])])]),e("h2",{attrs:{id:"后端返回的数据格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端返回的数据格式","aria-hidden":"true"}},[t._v("#")]),t._v(" 后端返回的数据格式")]),e("p",[t._v("下面是一个完整的数据返回 返回格式为"),e("code",[t._v("application/json")]),t._v(" ,返回状态码为"),e("code",[t._v("200")]),t._v(".")]),e("blockquote",[e("p",[t._v("注意 : 返回"),e("code",[t._v("200")]),t._v("以外的状态码将不被处理,如果想自行处理可以改写代码")])]),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),e("th",[t._v("描述")]),e("th",[t._v("参数")])])]),e("tbody",[e("tr",[e("td",[t._v("name")]),e("td",[t._v("版本号 如果检测的版本大于本地版本就会更新")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("title")]),e("td",[t._v("升级提示标题")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("description")]),e("td",[t._v("升级提示内容")]),e("td",[t._v("string")])]),e("tr",[e("td",[t._v("platform")]),e("td",[t._v("符合升级的平台 ios:升级苹果 android:升级安卓 both:都更新")]),e("td",[e("code",[t._v("ios")]),t._v(" ,"),e("code",[t._v("android")]),t._v(", "),e("code",[t._v("both")])])]),e("tr",[e("td",[t._v("hotupdate_type")]),e("td",[t._v("更新提示 silence:静默更新 tip:提示更新 (apk 的安装是需要提示的)")]),e("td",[e("code",[t._v("silence")]),t._v(","),e("code",[t._v("tip")])])]),e("tr",[e("td",[t._v("android_url")]),e("td",[t._v("更新下载地址 以"),e("code",[t._v(".apk")]),t._v(","),e("code",[t._v(".wgt")]),t._v("结尾的 http 地址")]),e("td",[t._v("url")])])])])])}],!1,null,null,null);d.default=_.exports}}]);